!function(t){var e;"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):((e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).webit||(e.webit={})).calendar=t()}(function(){return function s(n,o,r){function a(e,t){if(!o[e]){if(!n[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(u)return u(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}i=o[e]={exports:{}},n[e][0].call(i.exports,function(t){return a(n[e][1][t]||t)},i,i.exports,s,n,o,r)}return o[e].exports}for(var u="function"==typeof require&&require,t=0;t<r.length;t++)a(r[t]);return a}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(t=t("./cloneDate"))&&t.__esModule?t:{default:t};i.default=function(t,e){return(t=(0,s.default)(t)).setDate(t.getDate()+e),t}},{"./cloneDate":5}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=o(t("./cloneDate")),n=o(t("./daysInMonth"));function o(t){return t&&t.__esModule?t:{default:t}}i.default=function(t,e){var i=(t=(0,s.default)(t)).getDate();return t.setDate(1),t.setMonth(t.getMonth()+e),t.setDate(Math.min(i,(0,n.default)(t.getFullYear(),t.getMonth()+1))),t}},{"./cloneDate":5,"./daysInMonth":8}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(t=t("./addDays"))&&t.__esModule?t:{default:t};i.default=function(t,e){return(0,s.default)(t,7*e)}},{"./addDays":1}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;t={dom:((t=t("./dom/render"))&&t.__esModule?t:{default:t}).default};i.default=t},{"./dom/render":15}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(t){return new Date(t.getTime())}},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.month=u,i.monthWithFullWeeks=function(t,e){t=u(t,e),t.from=(0,o.default)(t.from,-((0,n.default)(t.from)-1)),e=(0,n.default)(t.till);1<e&&(t.till=(0,o.default)(t.till,7-e+1));(0,r.default)(t.from,t.till)<42&&(t.till=(0,o.default)(t.till,7));return t},i.week=function(t,e){void 0===e&&(e=1);var i=(0,o.default)(t,-((0,n.default)(t)-1)),e=(0,o.default)(t,7*e+1-(0,n.default)(t));return{from:i,till:e}};a(t("./daysInMonth"));var s=a(t("./cloneDate")),n=a(t("./dayOfWeek")),o=a(t("./addDays")),r=a(t("./periodDaysCount"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e){void 0===e&&(e=1);var i=t.getDate(),t=(0,o.default)(t,-(i-1)),i=(0,s.default)(t);return i.setMonth(i.getMonth()+ +e),{from:t,till:i}}},{"./addDays":1,"./cloneDate":5,"./dayOfWeek":7,"./daysInMonth":8,"./periodDaysCount":21}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(t){return t=0==(t=(t=void 0===t?new Date:t).getDay())?7:t}},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(t){var e,t=1<arguments.length?(e=t,arguments[1]):(e=t.getFullYear(),t.getMonth()+1);return new Date(e,t,0).getDate()}},{}],9:[function(t,e,i){"use strict";function s(t,e){this.prefix=t,this.classesMap=e}Object.defineProperty(i,"__esModule",{value:!0}),i.ClassesList=s,i.classNames=function(e){return function(){return Array.prototype.slice.call(arguments).map(function(t){return e+t}).join(" ")}},s.prototype={yes:function(t){this.classesMap[t]=!0},no:function(t){this.classesMap[t]=!1},className:function(){var t,e=[];for(t in this.classesMap)this.classesMap[t]&&e.push(this.prefix+t);return e.join(" ")}}},{}],10:[function(t,e,i){"use strict";function s(t){this.events=this.prepareEvents(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,s.prototype={prepareEvents:function(t){var e,i={};for(e in t)i[t[e]]=[];return i},on:function(t,e){return void 0!==this.events[t]&&this.events[t].push(e),this},fire:function(t,e){for(var i in this.events[t])this.events[t][i].apply(this,e)}},i.default=s},{}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(t("dom-helpers/src/ce")),u=n(t("dom-helpers/src/q")),h=n(t("dom-helpers/src/replaceContent")),s=t("../formatDate"),d=t("./CssClassNames");function n(t){return t&&t.__esModule?t:{default:t}}function l(){return"<"}function c(){return">"}function f(t){return(0,s.ymd)(t)}i.default=function(t,e,i){var i=(0,d.classNames)(i),s=e.get("navPrevFormatter",l),n=e.get("navNextFormatter",c),o=e.get("fullDateFormatter",f),r=(0,a.default)("div",{class:i("calendar-switch")},(0,a.default)("a",{class:i("calendar-nav","calendar-navprev"),data:{navprev:""}}),(0,a.default)("a",{class:i("calendar-nav","calendar-datecaption"),data:{datecaption:""}}),(0,a.default)("a",{class:i("calendar-nav","calendar-navnext"),data:{navnext:""}}));return(0,h.default)((0,u.default)(r,"[data-navprev]"),s()),(0,h.default)((0,u.default)(r,"[data-datecaption]"),o(t)),(0,h.default)((0,u.default)(r,"[data-navnext]"),n()),{getEl:function(){return r},setDate:function(t){(0,h.default)((0,u.default)(r,"[data-datecaption]"),o(t))}}}},{"../formatDate":16,"./CssClassNames":9,"dom-helpers/src/ce":24,"dom-helpers/src/q":33,"dom-helpers/src/replaceContent":38}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=s(t("dom-helpers/src/ce")),h=s(t("dom-helpers/src/append")),d=s(t("dom-helpers/src/replaceContent")),l=t("./CssClassNames");function s(t){return t&&t.__esModule?t:{default:t}}var c,n=["","M","T","W","Th","F","S","Sn"];function f(t){return n[t]}function p(t,e){return e?(e.nodeValue=c(day),null):document.createTextNode(c(t))}i.default=function(t,e){for(var i=(0,l.classNames)(e),s=(c=t.get("weekDayToText",f),t.get("weekDayFormatter",p)),n=(0,u.default)("div",{class:i("calendar-grid","calendar-weekdays")}),o=1;o<=7;o++){var r=(0,h.default)(n,(0,u.default)("div",{class:i("calendar-weekday","calendar--wd-"+o)})),a=s(o);a&&(0,d.default)(r,a)}return n}},{"./CssClassNames":9,"dom-helpers/src/append":23,"dom-helpers/src/ce":24,"dom-helpers/src/replaceContent":38}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(t,e){return e?(e.nodeValue=t.getDate(),null):document.createTextNode(t.getDate())}},{}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=r(t("../addDays")),n=r(t("../cloneDate")),o=r(t("dom-helpers/src/ce"));function r(t){return t&&t.__esModule?t:{default:t}}i.default=function(t){for(var e=[],i=(0,n.default)(t.from);i.getTime()<t.till.getTime();)e.push((0,o.default)("div",{data:{ts:i.getTime()}})),i=(0,s.default)(i,1);return e}},{"../addDays":1,"../cloneDate":5,"dom-helpers/src/ce":24}],15:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=S(t("../cloneDate")),s=S(t("infinityswipe")),n=S(t("../properties")),o=S(t("../addWeeks")),r=S(t("../addMonths")),u=S(t("../dayOfWeek")),h=S(t("../isHigherMonthThan")),d=S(t("../isLowerMonthThan")),l=S(t("../isSameDate")),c=S(t("../period")),f=S(t("dom-helpers/src/ce")),p=S(t("dom-helpers/src/qa")),v=S(t("dom-helpers/src/remove")),g=S(t("dom-helpers/src/append")),m=S(t("dom-helpers/src/replaceContent")),y=S(t("dom-helpers/src/event/clickp")),w=S(t("./periodStructure")),b=S(t("./calendarEvents")),x=S(t("./defaultMonthDayFormatter")),T=S(t("./createWeekDaysEl")),D=S(t("./createDateSwitchEl")),C=t("../formatDate"),M=t("./CssClassNames"),P=t("../createPeriod");function S(t){return t&&t.__esModule?t:{default:t}}function _(t,e){this.irt=0,this.sdt=0,this.events=new b.default(["dateclick","periodselect","prevclick","nextclick","datecaptionclick","slidechange","slideschange"]),this.props=new n.default(e),this.cssPrefix=this.props.get("cssprefix","wb");var i=(this.state=null,M.classNames)(this.cssPrefix);this.el=(0,f.default)("div",{class:i("calendar")}),this.dateSwitch=null,this.props.get("showDateSwitch",!0)&&(this.dateSwitch=(0,D.default)((0,a.default)(t),this.props,this.cssPrefix),(0,g.default)(this.el,this.dateSwitch.getEl())),this.props.get("showWeekdays",!0)&&(0,g.default)(this.el,(0,T.default)(this.props,this.cssPrefix)),this.slidesEl=(0,g.default)(this.el,(0,f.default)("div",{class:i("calendar-slides")})),this.slideEls=(0,g.default)(this.slidesEl,Array(this.props.get("slidesCount",5)).fill().map(function(){return(0,f.default)("div",{class:i("calendar-slide")})})),this.baseDate=(0,a.default)(t),this.date=(0,a.default)(t),this.showToday=this.props.get("showToday",!0),this.today=new Date,this.showSelectedDate=this.props.get("showSelectedDate",!0),this.selectedDate=null,this.selectPeriod=this.props.get("selectPeriod",!1),this.selectPeriod&&(this.showSelectedDate=!1),this.selectedPeriod=new c.default(this.props.get("selectedPeriod",null)),this.initInfinitySwipe(),this.setEvents()}_.prototype={setEvents:function(){var s=this;this.infty.onSlideAdd(function(t,e,i){return s.handleSlideAdd(t,e,i)}),this.infty.onChange(function(){return s.handleSlideChange()}),this.infty.onSlidesChange(function(t){return s.handleSlidesChange(t)}),(0,y.default)(this.el,"[data-ts]",function(t,e){return s.handleDateClick(e)}),(0,y.default)(this.el,"[data-navprev]",function(){return s.handleDateSwitchPrevClick()}),(0,y.default)(this.el,"[data-navnext]",function(){return s.handleDateSwitchNextClick()}),(0,y.default)(this.el,"[data-datecaption]",function(){return s.handleDateSwitchCaptionClick()})},initInfinitySwipe:function(){this.infty=new s.default(this.slidesEl,this.slideEls,{positionItems:this.props.get("positionSlides",!0),slidesPadding:this.props.get("slidesPadding",0)})},handleSlideAdd:function(t,e,i){(0,m.default)(e,"");var s=this.props.get("view","month"),n=this.props.get("count",1),t=this.calcIndexDateByView(s,n,t),o=(i.setData("date",(0,a.default)(t)),(0,M.classNames)(this.cssPrefix)),e=(0,g.default)(e,(0,f.default)("div",{class:o("calendar-grid","calendar-dates")}));(0,g.default)(e,(0,w.default)(this.createDatesPeriodByView(s,n,t))),this.decorateSlideDates(i)},decorateSlideDates:function(t){var o=this,r=t.getData("date");(0,p.default)(t.el,"[data-ts]").forEach(function(t){var e=new Date(parseInt(t.dataset.ts,10)),i=(delete t.dataset.prevmonth,delete t.dataset.nextmonth,delete t.dataset.currmonth,delete t.dataset.today,new M.ClassesList(o.cssPrefix,{"calendar-date":!0,"calendar--wd-1":!1,"calendar--wd-2":!1,"calendar--wd-3":!1,"calendar--wd-4":!1,"calendar--wd-5":!1,"calendar--wd-6":!1,"calendar--wd-7":!1,"calendar--nextmonth":!1,"calendar--prevmonth":!1,"calendar--today":!1,"calendar--selected":!1,"calendar--period-start":!1,"calendar--period-end":!1,"calendar--period-in":!1}));i.yes("calendar--wd-"+(0,u.default)(e)),(0,h.default)(e,r)&&(i.yes("calendar--nextmonth"),t.dataset.nextmonth=!0),(0,d.default)(e,r)&&(i.yes("calendar--prevmonth"),t.dataset.prevmonth=!0),o.showToday&&(0,l.default)(e,o.today)&&(i.yes("calendar--today"),t.dataset.today=!0),o.showSelectedDate&&o.selectedDate&&(0,l.default)(e,o.selectedDate)&&i.yes("calendar--selected"),o.selectedPeriod.isStart(e)&&i.yes("calendar--period-start"),o.selectedPeriod.isEnd(e)&&i.yes("calendar--period-end"),o.selectedPeriod.isIn(e)&&i.yes("calendar--period-in");var s=(s=o.props.get("monthDayFormatter"))||x.default,n=0<t.childNodes.length?t.childNodes[0]:null,s=s((0,a.default)(e),n,o.getDateState(e));s&&(0,m.default)(t,s),t.className=i.className()})},handleDateSwitchPrevClick:function(){this.infty.prevSlide(),this.events.fire("prevclick",[])},handleDateSwitchNextClick:function(){this.infty.nextSlide(),this.events.fire("nextclick",[])},handleDateSwitchCaptionClick:function(){this.events.fire("datecaptionclick",[])},handleDateClick:function(t){var e=this,i=new Date(parseInt(t.dataset.ts,10)),i=(this.selectPeriod?(this.selectedPeriod.hasFullPeriod()?(this.selectedPeriod.from=i,this.selectedPeriod.till=null):this.selectedPeriod.hasPeriodFrom()?this.selectedPeriod.hasPeriodTill()||(this.selectedPeriod.till=i):this.selectedPeriod.from=i,this.selectedPeriod.swapIfMissOrdered()):(this.selectedDate=i,this.date=(0,a.default)(this.selectedDate)),!1);(i="month"==this.props.get("view")?!0:i)&&(t.dataset.prevmonth?setTimeout(function(){return e.infty.prevSlide()},2):t.dataset.nextmonth&&setTimeout(function(){return e.infty.nextSlide()},2)),this.refresh(),this.selectPeriod?this.selectedPeriod.hasFullPeriod()&&this.events.fire("periodselect",[this.selectedPeriod.toObj()]):this.events.fire("dateclick",[(0,a.default)(this.selectedDate)])},handleSlideChange:function(){var t=this.infty.getCurrent();this.date=(0,a.default)(t.getData("date")),this.dateSwitch&&this.dateSwitch.setDate((0,a.default)(t.getData("date"))),this.events.fire("slidechange",[(0,a.default)(t.getData("date"))])},handleSlidesChange:function(t){this.events.fire("slideschange",[t.map(function(t){return t.getData("date")})])},getDateState:function(t){if(this.state)return t=(0,C.ymd)(t),this.state[t]},calcIndexDateByView:function(t,e,i){switch(t){case"week":return(0,o.default)(this.baseDate,e*i);case"month":return(0,r.default)(this.baseDate,e*i)}},createDatesPeriodByView:function(t,e,i){switch(t){case"week":return(0,P.week)(i,e);case"month":return(0,P.monthWithFullWeeks)(i,e)}},getEl:function(){return this.el},on:function(t,e){this.events.on(t,e)},setState:function(t){this.state=t,this.refresh()},setDate:function(t){var e=this;this.date=(0,a.default)(t),this.dateSwitch&&this.dateSwitch.setDate((0,a.default)(this.date)),this.baseDate=(0,a.default)(t),clearTimeout(this.irt),this.irt=setTimeout(function(){return e.infty.restart()},10)},setSelectedDate:function(t){this.selectedDate=(0,a.default)(t),this.setDate((0,a.default)(this.selectedDate))},setSelectedPeriod:function(t){this.selectedPeriod=new c.default(t),this.refresh()},setSelectPeriod:function(t){this.selectPeriod=t,this.selectPeriod?this.showSelectedDate=!1:(this.showSelectedDate=!0,this.selectedPeriod=new c.default(null)),this.refresh()},getDate:function(){return(0,a.default)(this.date)},getSelectedDate:function(){return this.selectedDate?(0,a.default)(this.selectedDate):null},getSelectedPeriod:function(){return this.selectedPeriod.toObj()},refresh:function(){var e=this;clearTimeout(this.sdt),this.sdt=setTimeout(function(){return e.infty.getSlides().slides.forEach(function(t){return e.decorateSlideDates(t)})},10)},destroy:function(){this.el&&((0,v.default)(this.el),delete this.el)}},i.default=_},{"../addMonths":2,"../addWeeks":3,"../cloneDate":5,"../createPeriod":6,"../dayOfWeek":7,"../formatDate":16,"../isHigherMonthThan":17,"../isLowerMonthThan":18,"../isSameDate":19,"../period":20,"../properties":22,"./CssClassNames":9,"./calendarEvents":10,"./createDateSwitchEl":11,"./createWeekDaysEl":12,"./defaultMonthDayFormatter":13,"./periodStructure":14,"dom-helpers/src/append":23,"dom-helpers/src/ce":24,"dom-helpers/src/event/clickp":26,"dom-helpers/src/qa":34,"dom-helpers/src/remove":37,"dom-helpers/src/replaceContent":38,infinityswipe:44}],16:[function(t,e,i){"use strict";function s(t){return t=1==(t+="").length?"0"+t:t}Object.defineProperty(i,"__esModule",{value:!0}),i.ymd=function(t){return t.getFullYear()+"-"+s(t.getMonth()+1)+"-"+s(t.getDate())}},{}],17:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(t,e){return t.getFullYear()>e.getFullYear()||t.getFullYear()==e.getFullYear()&&t.getMonth()>e.getMonth()}},{}],18:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(t,e){return t.getFullYear()<e.getFullYear()||t.getFullYear()==e.getFullYear()&&t.getMonth()<e.getMonth()}},{}],19:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(t,e){return t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()}},{}],20:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=o(t("./cloneDate")),n=o(t("./isSameDate"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){this.from=t&&t.from?t.from:null,this.till=t&&t.till?t.till:null}r.prototype={isEmpty:function(){return!this.from&&!this.till},hasFullPeriod:function(){return!(!this.from||!this.till)},hasPeriodFrom:function(){return!!this.from},hasPeriodTill:function(){return!!this.till},isStart:function(t){return!this.isEmpty()&&!!this.from&&(0,n.default)(t,this.from)},isEnd:function(t){return!this.isEmpty()&&!!this.till&&(0,n.default)(t,this.till)},isIn:function(t){return!this.isEmpty()&&t>=this.from&&t<=this.till},swap:function(){var t=this.from;this.from=this.till,this.till=t},swapIfMissOrdered:function(){this.hasFullPeriod()&&this.till<this.from&&this.swap()},toObj:function(){return this.isEmpty()?null:{from:this.from?(0,s.default)(this.from):null,till:this.till?(0,s.default)(this.till):null}}},i.default=r},{"./cloneDate":5,"./isSameDate":19}],21:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;i.default=function(t,e){return Math.round((e-t)/864e5)}},{}],22:[function(t,e,i){"use strict";function s(t){this.props=void 0===t?{}:t}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,s.prototype={get:function(t,e){return void 0===this.props[t]?e:this.props[t]}},i.default=s},{}],23:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=s(t("./re")),a=s(t("./isArrayLike")),u=s(t("./isEmpty")),h=s(t("./isTextContent"));function s(t){return t&&t.__esModule?t:{default:t}}i.default=function t(e,i){e=(0,r.default)(e);for(var s=(0,a.default)(i)?i:[i],n=0;n<s.length;n++){var o=s[n];(0,a.default)(o)?t(e,o):((0,h.default)(o)&&(o=document.createTextNode((0,u.default)(o)?"":o)),e.appendChild(o))}return i}},{"./isArrayLike":28,"./isEmpty":29,"./isTextContent":30,"./re":35}],24:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){return s.default.h.apply(s.default,Array.prototype.slice.call(arguments))};var s=(i=t("./jsx"))&&i.__esModule?i:{default:i}},{"./jsx":31}],25:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,i){function e(t){var e=t.target;if(o)for(;e&&e!==s;){if(e[a.default](o))return i&&t.preventDefault(),void(r&&r(t,e));e=e.parentNode}else i&&t.preventDefault(),r&&r(t,e)}var s=t.el,n=t.eventName,o=t.querySelector,r=t.cb;return s.addEventListener(n,e),e};var a=(i=t("../other/matchesMethodName"))&&i.__esModule?i:{default:i}},{"../other/matchesMethodName":32}],26:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){return(0,n.default)((0,s.default)(arguments,"click"),!0)};var s=o(t("./parseArguments")),n=o(t("./addListener"));function o(t){return t&&t.__esModule?t:{default:t}}},{"./addListener":25,"./parseArguments":27}],27:[function(t,e,i){"use strict";function n(t,e){return e<t.length?t[e]:void 0}function o(t,e){return"string"==typeof n(t,e)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){var i,s={el:void 0,eventName:void 0,querySelector:void 0,cb:void 0};return function(t,e){return"function"==typeof n(t,e)}(t,0)&&e?(s.el=document,s.cb=n(t,0),s.eventName=e):(o(t,i=0)?s.el=document:(s.el=n(t,i),i+=1),e?s.eventName=e:(s.eventName=n(t,i),i+=1),o(t,i)?(s.querySelector=n(t,i),s.cb=n(t,i+1)):s.cb=n(t,i)),s}},{}],28:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return"[object Array]"===Object.prototype.toString.call(t)||"[object NodeList]"===Object.prototype.toString.call(t)}},{}],29:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return null==t}},{}],30:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return"string"==typeof t||"number"==typeof t||null==t}},{}],31:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=s(t("./setAttributes")),a=s(t("./append"));function s(t){return t&&t.__esModule?t:{default:t}}i.default={Fragment:"fragment",h:function(t,e){var i;if(t===this.Fragment?i=new DocumentFragment:"function"==typeof t?i=t(e):(i=document.createElement(t),e&&(0,r.default)(i,e)),i){for(var s=arguments.length,n=new Array(2<s?s-2:0),o=2;o<s;o++)n[o-2]=arguments[o];(0,a.default)(i,n)}return i}}},{"./append":23,"./setAttributes":39}],32:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s="matches",s=s=(i.default=void 0)!==Element.prototype.msMatchesSelector?"msMatchesSelector":s;i.default=s},{}],33:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){var i;t="string"==typeof t?(i=document,t):(i=t,e);return i.querySelector(t)}},{}],34:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){var i;t="string"==typeof t?(i=document,t):(i=t,e);return i.querySelectorAll(t)}},{}],35:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return"string"!=typeof t?t:(0,s.default)(t)};var s=(i=t("./q"))&&i.__esModule?i:{default:i}},{"./q":33}],36:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return"string"!=typeof t?"object"!=n(t)||void 0===t.tagName?t:[t]:(0,s.default)(t)};var s=(i=t("./qa"))&&i.__esModule?i:{default:i};function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}},{"./qa":34}],37:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){(0,s.default)(t).forEach(function(t){t.parentNode&&t.parentNode.removeChild(t)})};var s=(i=t("./rea"))&&i.__esModule?i:{default:i}},{"./rea":36}],38:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e,i){var s,n;"string"==typeof t?(n=e,s=(0,o.default)(document,t)):"string"==typeof e&&void 0!==i?(n=i,s=(0,o.default)(t,e)):(s=t,n=e);if(!s)return n;return(0,a.default)(n)?(s.innerHTML=n,s.firstChild):(s.innerHTML="",r.default)(s,n)};var o=s(t("./q")),r=s(t("./append")),a=s(t("./isTextContent"));function s(t){return t&&t.__esModule?t:{default:t}}},{"./append":23,"./isTextContent":30,"./q":33}],39:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){var i,s,n=(t=(0,a.default)(t)).tagName.toUpperCase();for(s in e)if(e.hasOwnProperty(s))if(i=e[s],"data-"==(s="className"==s?"class":s).substring(0,5))t.dataset[s.substring(5)]=i;else if("data"==s)for(var o in i)t.dataset[o]=i[o];else if("style"==s)for(var r in i)t.style[r]=i[r];else"checked"==s&&"INPUT"==n?t.checked=!!i:t.setAttribute(s,(0,u.default)(i)?"":i)};var a=s(t("./re")),u=s(t("./isEmpty"));function s(t){return t&&t.__esModule?t:{default:t}}},{"./isEmpty":29,"./re":35}],40:[function(t,e,i){e.exports=function(t,e){t=t.cloneNode(!0);return e.appendChild(t),t}},{}],41:[function(t,e,i){var n=t("./cloneAndAppend");function s(t,e){var i,s=this;if(this.items=[],i=t,"undefined"!=typeof jQuery?i instanceof jQuery:!(!i||void 0===i.jquery))t.each(function(t){s.items.push(this)});else for(var n=0;n<t.length;n++)s.items.push(t[n])}s.prototype={each:function(t){for(var e=0;e<this.items.length;e++)t(this.items[e],e)},clone:function(t){if(!(this.items.length<=0||this.items.length>=t))for(var e=this.items.length,i=this.items[0].parentNode;this.items.length<t;)for(var s=0;s<e;s++)this.items.push(n(this.items[s],i))}},e.exports=s},{"./cloneAndAppend":40}],42:[function(t,e,i){function r(t,e){return parseInt(t.getPropertyValue(e),10)}e.exports=function(t){var e=r(n=getComputedStyle(t),"border-left-width")+r(n,"border-right-width"),i=r(n,"border-top-width")+r(n,"border-bottom-width"),s=r(n,"padding-left")+r(n,"padding-right"),n=r(n,"padding-top")+r(n,"padding-bottom");if(void 0!==t.getBoundingClientRect){var o=t.getBoundingClientRect();if(void 0!==o.width&&void 0!==o.height)return{width:o.width-e-s,height:o.height-i-n}}return{width:t.offsetWidth-e-s,height:t.offsetHeight-i-n}}},{}],43:[function(t,e,i){function o(t,e){return parseInt(t.getPropertyValue(e),10)}e.exports=function(t,e){e=void 0!==e&&e;var i=getComputedStyle(t),s=0,n=0;if(e&&(s=o(i,"margin-left")+o(i,"margin-right"),n=o(i,"margin-top")+o(i,"margin-bottom")),void 0!==t.getBoundingClientRect){e=t.getBoundingClientRect();if(void 0!==e.width&&void 0!==e.height)return{width:e.width+s,height:e.height+n,marginH:s,marginV:n}}return{width:t.offsetWidth+s,height:t.offsetHeight+n,marginH:s,marginV:n}}},{}],44:[function(t,e,i){var Y=t("swipe"),U=t("stepper"),Q=t("./slides"),G=t("./getElementDimensions"),J=t("./replaceContent");function s(t,e,i){var s,n,o,r,u,h,a,d=function(){},l=function(){},c=function(){},f=0,p=!1,v=[0,0,.12,1],g=300,m={direction:"horizontal",fireMoveOnRequestAnimationFrame:!0},y=F(),w=!0;function N(){new Y(function(){if(i&&i.swipeTarget)return i.swipeTarget;return t}(),m).on("start",I).on("move",V).on("tap",R).on("end",B)}function A(){u=new Q(e,f,{onSlideAdd:q,onSlidesChange:z,onPagesCount:H,onAfterPrepareSlides:b,slidesPadding:W,positionItems:function(){if(i&&void 0!==i.positionItems)return i.positionItems;return!1}(),rotateItems:F(),boxOffset:{left:L().x}})}function b(t){var e=L().x;0!=e&&(e=M(t.findClosestToX(e)),t.start(),t.setXOffset(e.to.x-e.slide.getX()))}function R(t){c(u.findByDomElement(t.touchedElement))}function I(t){w&&(h.isRunning()&&h.stop(),a=k(),u.start(),p=!0,l(!!t.touchedElement))}function V(t){!w||h.isRunning()||p&&(d(Math.abs(t.offset.x)/f,t.direction,!!t.touchedElement,_()),y?u.setXOffset(t.offset.x):u.setXOffset(t.offset.x-.75*function(t){var e=T(t),t=C(t);if(0<e)return e;if(0<t)return-t;return 0}(t.offset.x)))}function B(t){w&&p&&(p=!1,t.offset)&&P(M(function(t){if(!y){if(x())return u.first();if(D())return u.last()}var e=Math.abs(t.offset.x/a.width);return"left"==t.direction?t.isSwipe||.33333<e?u.findClosestToXFromRight(L().x):u.findClosestToXFromLeft(L().x):t.isSwipe||.33333<e?u.findClosestToXFromLeft(L().x):u.findClosestToXFromRight(L().x)}(t)),t.isSwipe,!!t.touchedElement,{offset:Math.abs(t.offset.x),direction:t.direction})}function x(t){return 0<T(t)}function T(t){var e=u.first().getX();return 0<(e=void 0!==t?u.first().getXWithoutOffset()+t:e)?e:0}function D(t){return 0<C(t)}function C(t){var e=u.last(),i=e.getX()+e.width;return(i=void 0!==t?e.getXWithoutOffset()+e.width+t:i)<f?f-i:0}function M(t){return{slide:t,to:(t=t,y?L():D()?{x:f-u.last().width,y:void 0}:x()?{x:0,y:void 0}:(e=u.last().getX()+u.last().width-f,{x:Math.max(0,t.getX()-e),y:void 0}))};var e}function P(t,e,i,s){void 0===e&&(e=!1),void 0===i&&(i=!1);var n,o,r,a=t.to.x-t.slide.getX();0!=a&&(n=0<a?"right":"left",r=o=0,u.start(),h.runFrom(0,{duration:g,onStep:function(t){var e;o=(e=0)-(e-a)*t,u.setXOffset(o),s?(r=s.direction==n?s.offset+Math.abs(o):s.offset+-Math.abs(o),r/=f):r=t,d(r,n,!1,_())},onDone:function(){S({isSwipe:e,isTouch:i})}}))}function S(t){void 0!==n&&n(t)}function _(){return u.findVisibleBetweenX(L().x,f)}function k(){return u.findFirstBetweenX(L().x-1,f)}function E(){return u.findClosestToXFromRight(k().getX()+1)}function O(){return u.findClosestToXFromLeft(k().getX()-1)}function W(){return i&&void 0!==i.slidesPadding?"function"==typeof i.slidesPadding?i.slidesPadding():i.slidesPadding:0}function F(){return!i||void 0===i.rotate||i.rotate}function L(){return i&&void 0!==i.snapPosition?i.snapPosition:{x:0,y:void 0}}function q(t,e,i){s&&void 0!==(t=s(t,e,i))&&J(e,t)}function z(t){o&&o(t)}function H(t){r&&r(t)}function X(t){w=t}function j(){f=G(t).width,u.setViewportWidth(f),u.reset()}return setTimeout(function(){N(),A(),h=new U({bezierCurve:v}),j()}),{onSlideAdd:function(t){s=t},onSlidesChange:function(t){o=t},onChange:function(t){n=t},onPagesCount:function(t){r=t},onSlideMoveStart:function(t){l=t},onSlideMove:function(t){d=t},onClick:function(t){c=t},nextSlide:function(){l(!1),E()&&P(M(E()))},prevSlide:function(){l(!1),O()&&P(M(O()))},nextPage:function(){},prevPage:function(){},showSlide:function(t){u.showByIndex(t),S({isSwipe:!1,isTouch:!1})},getCurrent:k,getNext:E,getPrev:O,setSnapPosition:function(t){i.snapPosition=t,u.setBoxOffset({left:L().x}),b(u)},getSlides:function(){return u},disable:function(){X(!1)},enable:function(){X(!0)},restart:function(){u.reset()},resize:function(){var t=k();j(),t&&u.showByIndex(t.index)}}}e.exports=s},{"./getElementDimensions":42,"./replaceContent":45,"./slides":47,stepper:49,swipe:50}],45:[function(t,e,i){e.exports=function(t,e){t.innerHTML="","string"==typeof e||"number"==typeof e||null==e?t.appendChild(document.createTextNode(null==e?"":e)):t.appendChild(e)}},{}],46:[function(t,e,i){var s=t("./getElementOuterDimensions");function n(t,e,i){return void 0===t[e]?i:t[e]}function o(t,e,i){void 0===i&&(i={}),this.el=t,this.width=this.getWidth(),this.indexReal=e,this.index=e,this.pageReal=0,this.page=0,this.xReal=n(i,"xReal",0),this.x=n(i,"x",0),this.xOffset=n(i,"xOffset",0),this.customData={}}o.prototype={getWidth:function(){return s(this.el,!0).width},updateWidth:function(){this.width=this.getWidth()},updateCss:function(){this.el.style.transform="translate3d("+(this.x+this.xOffset)+"px,0,0)"},setXOffset:function(t){this.xOffset=t},getX:function(){return this.xReal+this.x+this.xOffset},getXWithoutOffset:function(){return this.xReal+this.x},start:function(){this.x=this.x+this.xOffset,this.xOffset=0},resetData:function(){this.customData={}},setData:function(t,e){this.customData[t]=e},getData:function(t,e){return void 0===this.customData[t]?e:this.customData[t]}},e.exports=o},{"./getElementOuterDimensions":43}],47:[function(t,e,i){function s(t,e,i){this.viewport={},this.slidesCount=0,this.slides=[],this.conf=i,this.pagesCountCallback=i.onPagesCount,this.slideAddCallbacks=[],this.conf&&this.conf.onSlideAdd&&this.slideAddCallbacks.push(this.conf.onSlideAdd),this.changeCallbacks=[],this.conf&&this.conf.onSlidesChange&&this.changeCallbacks.push(this.conf.onSlidesChange),this.afterPrepareSlidesCallbacks=[],this.conf&&this.conf.onAfterPrepareSlides&&this.afterPrepareSlidesCallbacks.push(this.conf.onAfterPrepareSlides),this.boxOffset={left:0,right:0},this.conf&&this.conf.boxOffset&&this.conf.boxOffset.left&&(this.boxOffset.left=this.conf.boxOffset.left),this.conf&&this.conf.boxOffset&&this.conf.boxOffset.right&&(this.boxOffset.right=this.conf.boxOffset.right),this.slidesElements=new o(t),this.conf.rotateItems&&this.slidesElements.clone(5)}var n=t("./getElementOuterDimensions"),o=t("./elementsCollection"),r=t("./slide");s.prototype={prepareSlides:function(t){var e=this;this.conf.positionItems&&this.positionItems(),t.each(function(t){e.push(t)}),this.addPageNumbers(),this.balanceSlides(),this.pagesCountCallback(this.getMaxPage()),this.executeChangeCallbacks(this.slides),this.executeAfterPrepareSlidesCallbacks(this)},reset:function(){this.slides=[],this.prepareSlides(this.slidesElements)},positionItems:function(){var e=this,i=0;this.slidesElements.each(function(t){t.style.left=i+"px",i=i+n(t).width+e.getSlidesPadding()})},setViewportWidth:function(t){this.viewport.width=t},setBoxOffset:function(t){this.boxOffset=t},showByIndex:function(t){this.start();var e,i=t%this.slidesCount;i<0&&(i=this.slidesCount+i);for(var s=0;s<this.slidesCount;s++)if(this.slides[s].indexReal==i){e=s;break}for(var n=this.boxOffset.left,s=0;s<this.slidesCount;s++)this.slides[e].x=-this.slides[e].xReal+n,this.slides[e].index=t,n+=this.slides[e].width+this.getSlidesPadding(),this.slides[e].updateCss(),this.executeSlideAddCallbacks(this.slides[e].index,this.slides[e].el,this.slides[e]),t++,++e==this.slidesCount&&(e=0);var o=this;this.balanceSlides(function(){o.executeChangeCallbacks(o.slides)})},getByIndex:function(t){for(var e=0;e<this.slidesCount;e++)if(this.slides[e].index===t)return this.slides[e];return!1},first:function(){return this.slides[0]},last:function(){return 0<this.slidesCount&&this.slides[this.slidesCount-1]},visualLast:function(){for(var t=0,e=0;e<this.slidesCount;e++)this.slides[t].getX()<this.slides[e].getX()&&(t=e);return this.slides[t]},visualFirst:function(){for(var t,e=0;e<this.slidesCount;e++)(void 0===t||this.slides[t].getX()>this.slides[e].getX())&&(t=e);return this.slides[t]},nextIndex:function(){return this.last()?this.last().index+1:0},nextXReal:function(){return this.last()?this.last().xReal+this.last().width+this.getSlidesPadding():0},slidesCountAfterViewport:function(){for(var t=0,e=0;e<this.slidesCount;e++)this.slides[e].getX()>this.viewport.width&&t++;return t},slidesCountBeforeViewport:function(){for(var t=0,e=0;e<this.slidesCount;e++)this.slides[e].getX()+this.slides[e].width<0&&t++;return t},push:function(t){this.pushWithIndex(t,this.nextIndex())},pushWithIndex:function(t,e){t=new r(t,e,{xReal:this.nextXReal()});this.slidesCount=this.slides.push(t),t.updateCss(),this.executeSlideAddCallbacks(this.last().index,this.last().el,this.last())},start:function(){this.slides.map(function(t){t.start()})},setXOffset:function(t){for(var e=0;e<this.slidesCount;e++)this.slides[e].setXOffset(t),this.slides[e].updateCss();var i=this;this.balanceSlides(function(){i.executeChangeCallbacks(i.slides)})},moveLastToFirst:function(){var t=this.visualLast(),e=this.visualFirst(),i=t.width+this.getSlidesPadding();t.index=e.index-1,t.x=e.xReal-(t.xReal+i)+e.x,t.updateCss(),this.executeSlideAddCallbacks(t.index,t.el,t)},moveFirstToLast:function(){var t=this.visualFirst(),e=this.visualLast(),i=e.width+this.getSlidesPadding();t.index=e.index+1,t.x=e.xReal+i-t.xReal+e.x,t.updateCss(),this.executeSlideAddCallbacks(t.index,t.el,t)},balanceSlides:function(t){if(this.conf.rotateItems&&!(this.viewport.width<=0)){for(var e=!1,i=0;i<4;i++)this.balanceOnce()&&(e=!0);e&&t&&t()}},balanceOnce:function(){var t=this.slidesCountBeforeViewport(),e=this.slidesCountAfterViewport(),i=Math.floor((e-t)/2);if(Math.abs(i)<1)return!1;for(var s=i<0?"moveFirstToLast":"moveLastToFirst",i=Math.abs(i),n=0;n<i;n++)this[s]();return 0<i},executeSlideAddCallbacks:function(){for(var t=0;t<this.slideAddCallbacks.length;t++)this.slideAddCallbacks[t].apply(this,arguments)},executeChangeCallbacks:function(){for(var t=0;t<this.changeCallbacks.length;t++)this.changeCallbacks[t].apply(this,arguments)},executeAfterPrepareSlidesCallbacks:function(){for(var t=0;t<this.afterPrepareSlidesCallbacks.length;t++)this.afterPrepareSlidesCallbacks[t].apply(this,arguments)},getSlidesPadding:function(){return this.conf.slidesPadding()},getSortedVisual:function(i){for(var t=[],e=0;e<this.slidesCount;e++)t.push(this.slides[e]);return t.sort(function(t,e){return t.getX()<e.getX()?"asc"==i?-1:1:t.getX()>e.getX()?0:t.getX()>e.getX()?"asc"==i?1:-1:void 0})},isBetweenX:function(t,e,i){if(t.getX()>e&&t.getX()<i)return!0},findByDomElement:function(t){for(var e=0;e<this.slidesCount;e++)if(this.slides[e].el===t||this.slides[e].el.contains(t))return this.slides[e];return!1},findBetweenX:function(t,e,i){for(var s=this.getSortedVisual(i),n=0;n<s.length;n++)if(this.isBetweenX(s[n],t,e))return this.slides[s[n].indexReal]},findClosestToX:function(t){for(var e,i=0;i<this.slidesCount;i++)(void 0===e||Math.abs(t-this.slides[i].getX())<Math.abs(t-this.slides[e].getX()))&&(e=i);return this.slides[e]},findClosestToXFromLeft:function(t){for(var e,i=0;i<this.slidesCount;i++)this.slides[i].getX()>t||(void 0===e||this.slides[e].getX()<this.slides[i].getX())&&(e=i);return this.slides[e]},findClosestToXFromRight:function(t){for(var e,i=0;i<this.slidesCount;i++)this.slides[i].getX()<t||(void 0===e||this.slides[e].getX()>this.slides[i].getX())&&(e=i);return this.slides[e]},findFirstBetweenX:function(t,e){return this.findBetweenX(t,e,"asc")},findLastBetweenX:function(t,e){return this.findBetweenX(t,e,"desc")},findVisibleBetweenX:function(t,e){for(var i=[],s=0;s<this.slidesCount;s++){var n=this.slides[s],o=n.getX(),r=o+n.width,a=t<o&&o<e;(a||t<r&&r<e)&&(a=(a=a?e-o:r-t)>n.width?n.width:a,i.push({slide:n,visibleRatio:a/n.width}))}return i},addPageNumbers:function(){for(var t=1,e=0,i=0;i<this.slidesCount;i++)this.slides[i].pageReal=t,this.slides[i].page=t,(e+=this.slides[i].width+this.getSlidesPadding())>=this.viewport.width-4&&(t++,e=0)},getMaxPage:function(){for(var t=1,e=0;e<this.slidesCount;e++)this.slides[e].pageReal>t&&(t=this.slides[e].pageReal);return t}},e.exports=s},{"./elementsCollection":41,"./getElementOuterDimensions":43,"./slide":46}],48:[function(t,e,i){e.exports=function(t,e,i,s){var a=3*t,u=3*(i-t)-a,h=1-a-u,n=3*e,o=3*(s-e)-n,r=1-n-o;function d(t){return((h*t+u)*t+a)*t}function l(t){for(var e,i,s,n,o=t,r=0;r<8;r++){if(s=d(o)-t,Math.abs(s)<1e-5)return o;if(n=(3*h*o+2*u)*o+a,Math.abs(n)<1e-6)break;o-=s/n}if((o=t)<(e=0))return e;if((i=1)<o)return i;for(;e<i;){if(s=d(o),Math.abs(s-t)<1e-5)return o;s<t?e=o:i=o,o=.5*(i-e)+e}return o}this.get=function(t){return t=l(t),((r*t+o)*t+n)*t}}},{}],49:[function(t,e,i){function s(t){this.defaultBezierCurve=[0,0,1,1],this.precision=1e7,this.progress=0,this.current=0,this.requestId=0,this.inProgress=!1,this.value=void 0,this.config=t,this.setConfig()}var n=t("./bezier2.js");s.prototype={setConfig:function(t){this.duration=this.getConfig("duration",t),this.easing=this.getConfig("bezierCurve",t),this.value=this.getConfig("value",t),this.stepCallback=this.getConfig("onStep",t),this.doneCallback=this.getConfig("onDone",t),this.forceStopCallback=this.getConfig("onForceStop",t)},run:function(t){this.setConfig(t),this.current=0,this.start(),this.step()},runFrom:function(t,e){this.setConfig(e),this.startTime=+new Date,this.startTime-=this.duration*t,this.progress=t,this.inProgress=!0,this.step()},isRunning:function(){return this.inProgress},start:function(){this.inProgress=!0,this.startTime=+new Date,this.progress=0},stop:function(){cancelAnimationFrame(this.requestId),this.done()},forceStop:function(){cancelAnimationFrame(this.requestId),this.inProgress=!1,this.forceStopCallback&&this.forceStopCallback()},done:function(){this.inProgress=!1,this.doneCallback&&this.doneCallback()},step:function(){var t=this;t.trackProgress(),this.current<this.startTime+this.duration?(this.runStepCallback(this.progress),this.requestId=requestAnimationFrame(function(){t.step()})):(this.runStepCallback(1),this.done())},trackProgress:function(){this.current=+new Date;var t=this.current-this.startTime;this.progress=this.easing.get(t/this.duration)},runStepCallback:function(t){this.value?this.stepCallback(t,this.calcValueFromProgress(t,this.value.from,this.value.to)):this.stepCallback(t)},calcValueFromProgress:function(t,e,i){return e+(i-e)*t},getEasing:function(t){return t&&t.length&&4==t.length||(t=this.defaultBezierCurve),new n(t[0],t[1],t[2],t[3])},getConfig:function(t,e){var i=this.getConfigValue(t,e);switch(t){case"bezierCurve":i=this.getEasing(i);break;case"duration":i=parseInt(i,10),i=isNaN(i)?200:i;break;case"onStep":case"onDone":case"onForceStop":i="function"==typeof i?i:function(){};break;case"value":i&&"object"==typeof i&&"unefined"!=typeof i.from&&"undefined"!=i.to||(i=void 0)}return i},getConfigValue:function(t,e){return e&&void 0!==e[t]?e[t]:this.config&&void 0!==this.config[t]?this.config[t]:void 0}},e.exports=s},{"./bezier2.js":48}],50:[function(t,e,i){var s,n;s=this,n=function(){function t(t){this.items=t}function e(t,e){return this.instanceId=i++,this.raf=void 0,this.swipeEl=document.getElementsByTagName("body")[0],this.el=t,this.events=this.prepareEvents(["swipe","move","start","end","pinchstart","pinchend","pinchmove","touchend","touchmove","tap","doubletap"]),this.config(e),this.setTouchAction(this._config.direction),this.touches={},this.touchesCount=0,this.slopeFactor=1,this.startTouches=!1,this.firstMoveTouches=!1,this.currentTouches=!1,this.offset,this.width,this.height,this.duration,this.moveDirection=null,this.swipeLogStackMaxLength=4,this.swipeLog={stack:[],duration:0,width:0,height:0},this.tapsLog={},this.waitForDoubleTap=!1,this.tapsLogExecuteTimeout=0,this.isTouchEvents=!1,this.isTouchedValidElement=!1,this.isMouseDown=void 0,this.handleEvents("add"),this}var i=0;t.prototype={first:function(){return 0<this.items.length&&this.items[0]},second:function(){return 1<this.items.length&&this.items[1]}};return e.prototype={prepareEvents:function(t){var e,i={};for(e in t)i[t[e]]=[];return i},handleEvents:function(t){var e=this,i=function(t){e.registerTouches(t,!0),e.isTouchedValidElement=0<e.touchesCount,e.isTouchedValidElement&&e._start(t)},s=function(t){e.isTouchedValidElement&&(e._end(t),e.isTouchedValidElement=!1),e.unregisterTouches(t),e.maybeFireTapping()},n=function(t){e.registerTouches(t),e.isTouchedValidElement&&e._move(t)},o=function(t,e){return t.x!=e.x||t.y!=e.y},t="add"==t?"addEvent":"removeEvent";this[t](this.swipeEl,"touchstart",function(t){e.isTouchEvents=!0,i(t)}),this[t](this.swipeEl,"touchmove",function(t){n(t)},{passive:!1}),this[t](this.swipeEl,"touchend",function(t){s(t)}),this[t](this.swipeEl,"mousedown",function(t){e.isMainMouseButton(t)&&(e.isMouseDown=e.formatTouch(t),e.isTouchEvents||i(t))}),this[t](this.swipeEl,"mousemove",function(t){e.isTouchEvents||e.isMouseDown&&o(e.isMouseDown,e.formatTouch(t))&&n(t)}),this[t](this.swipeEl,"mouseup",function(t){e.isTouchEvents||s(t),e.isMouseDown=void 0})},_start:function(t){this._config.alwaysPreventTouchStart&&this.preventEvent(t),this.startTouches=this.getTouches(),this.firstMoveTouches=!1,this.validMove=!1,this.moveDirection=null,this.swipeLog.stack=[],this.fire("start",[this.startTouches.first()]),this.maybeFirePinchStart()},_end:function(t){this.currentTouches=this.getTouches(),this.trackDuration(),this.trackSwipe();var e=this.formatMovement();e._swipeLog={duration:this.swipeLog.duration,width:this.swipeLog.width,height:this.swipeLog.height,stackLength:this.swipeLog.stack.lenght,isSwipe:!1},this.swipeLog.duration<80&&(7<this.swipeLog.width||7<this.swipeLog.height)&&(e._swipeLog.isSwipe=!0),e.isSwipe=e._swipeLog.isSwipe,this.startTouches=!1,this.firstMoveTouches=!1,this.currentTouches=!1,this.duration=void 0,this.offset=void 0,this.width=void 0,this.height=void 0,this.validMove&&this.fire("end",[e]),this.fire("touchend",[e]),this.maybeFirePinchEnd()},_move:function(t){var e=this;this.startTouches&&(this.maybePreventPinch(t),this.firstMoveTouches||(this.firstMoveTouches=this.getTouches()),this.currentTouches=this.getTouches(),this.clearTapLog(),this.trackDuration(),this.trackSwipe(),this.trackMovment(),this.fireTouchMove(),this.isValidMove()?(this.preventEvent(t),this.validMove=!0):this.validMove=!1,this.validMove&&(this._config.fireMoveOnRequestAnimationFrame?this.raf||(this.raf=window.requestAnimationFrame(function(t){e.startTouches&&e.fire("move",[e.formatMovement()]),e.raf=void 0})):this.fire("move",[this.formatMovement()])),this.maybeFirePinchMove())},maybeFireTapping:function(){clearTimeout(this.tapsLogExecuteTimeout),this.isEventsRegistered("doubletap")?this.maybeFireDoubleTap(this.getValidTapRegistered()):this.maybeFireSingleTap(this.getValidTapRegistered()),this.clearTapLog()},maybeFireDoubleTap:function(t){var e,i;t&&((e=this).waitForDoubleTap?(this.fire("doubletap",[t.touch]),this.waitForDoubleTap=!1):(this.waitForDoubleTap=!0,this.tapsLogExecuteTimeout=setTimeout((i=t.touch,function(){e.waitForDoubleTap=!1,e.fire("tap",[i])}),this._config.doubletapWaitTimeout)))},maybeFireSingleTap:function(t){t&&this.fire("tap",[t.touch])},maybePreventPinch:function(t){this._config.disablePinch&&2<=this.touchesCount&&t.preventDefault()},maybeFirePinchStart:function(){this.touchesCount<2||this.fire("pinchstart",[this.formatPinch(this.startTouches.first().x,this.startTouches.second().x,this.startTouches.first().y,this.startTouches.second().y)])},maybeFirePinchEnd:function(){this.touchesCount<2&&this.fire("pinchend",[])},maybeFirePinchMove:function(){this.touchesCount<2||this.fire("pinchmove",[{first:this.formatPinch(this.firstMoveTouches.first().x,this.firstMoveTouches.second().x,this.firstMoveTouches.first().y,this.firstMoveTouches.second().y),current:this.formatPinch(this.currentTouches.first().x,this.currentTouches.second().x,this.currentTouches.first().y,this.currentTouches.second().y)}])},formatPinch:function(t,e,i,s){return{x1:t,y1:i,x2:e,y2:s,width:Math.abs(t-e),height:Math.abs(i-s),distance:Math.sqrt(Math.pow(Math.abs(t-e),2)+Math.pow(Math.abs(i-s),2)),center:{x:this.calcMid(t,e),y:this.calcMid(i,s)}}},calcMid:function(t,e){return t<e?(e-t)/2+t:(t-e)/2+e},formatMovement:function(){return{direction:this.getFormattedDirection(),offset:this.offset,duration:this.duration,width:this.width,height:this.height,x:this.currentTouches.first().x,y:this.currentTouches.first().y,touchedElement:this.currentTouches.first().touchedElement,speed:isNaN(this.width/this.duration)?0:this.width/this.duration,realDirection:this.direction}},getFormattedDirection:function(){return this.isDirection(this._config.direction,"horizontal")||this.isDirection(this._config.direction,"vertical")?this.getDirection():this.isDirection(this._config.direction,"horizontal")||this.isDirection(this._config.direction,"vertical")?this.getHorizontalDirection():void 0},isValidMove:function(){if(this.swipeLog.stack.length<2)return!1;if(0<this._config.direction.length&&(this.moveDirection||(this.moveDirection=this.getMoveDirection()),!this.isDirection(this._config.direction,this.moveDirection)))return!1;var t,e={minWidth:"width",minHeight:"height",minDuration:"duration"},i={maxWidth:"width",maxHeight:"height",maxDuration:"duration"};for(t in e)if(this._config[t]&&this[e[t]]<this._config[t])return!1;for(t in i)if(this._config[t]&&this[i[t]]>this._config[t])return!1;return!0},trackMovment:function(){this.offset={x:this.currentTouches.first().x-this.firstMoveTouches.first().x,y:this.currentTouches.first().y-this.firstMoveTouches.first().y},this.width=Math.abs(this.offset.x),this.height=Math.abs(this.offset.y),this.direction=this.getDirection()},trackDuration:function(){this.duration=this.currentTouches.first().t-this.startTouches.first().t},trackSwipe:function(){this.swipeLog.stack.push({x:this.currentTouches.first().x,y:this.currentTouches.first().y,duration:this.duration}),this.swipeLog.stack.length>this.swipeLogStackMaxLength&&this.swipeLog.stack.shift(),this.swipeLog.duration=this.swipeLog.stack[this.swipeLog.stack.length-1].duration-this.swipeLog.stack[0].duration,this.swipeLog.width=Math.abs(this.swipeLog.stack[this.swipeLog.stack.length-1].x-this.swipeLog.stack[0].x),this.swipeLog.height=Math.abs(this.swipeLog.stack[this.swipeLog.stack.length-1].y-this.swipeLog.stack[0].y)},getDirection:function(){return this.getVerticalDirection()?this.getVerticalDirection():this.getHorizontalDirection()?this.getHorizontalDirection():void 0},getHorizontalDirection:function(){return this.currentTouches.first().x>this.startTouches.first().x?"right":this.currentTouches.first().x<this.startTouches.first().x&&"left"},getVerticalDirection:function(){if(this.offset){var t=this.offset.y/this.offset.x;if(t>this.slopeFactor)return"up";if(t<-this.slopeFactor)return"down"}return!1},getMoveDirection:function(){return this.isHorizontalDirection()?"horizontal":this.isVerticalDirection()?"vertical":""},isHorizontalDirection:function(){return"left"==this.direction||"right"==this.direction},isVerticalDirection:function(){return"up"==this.direction||"down"==this.direction},handleTouchRegistered:function(t){this.touchesCount++,1==this.touchesCount&&this.registerTapLog(this.touches[t.identifier])},handleTouchUnregistered:function(t){this.touchesCount--,this.unregisterTapLog(t)},registerTouches:function(t,e){if(t.changedTouches)for(var i=0;i<t.changedTouches.length;i++)this.registerTouch(this.formatTouch(t.changedTouches[i]),this.eventTarget(t.changedTouches[i]),e);else this.registerTouch(this.formatTouch(t),this.eventTarget(t),e)},unregisterTouches:function(t){if(t.changedTouches)for(var e=0;e<t.changedTouches.length;e++)this.unregisterTouch(t.changedTouches[e].identifier);else this.unregisterTouch("_faketouch")},registerTouch:function(t,e,i){return!(i&&!this.isTheElement(e))&&(this.isTouchRegistered(t)?(this.touches[t.identifier]=t,this.touches[t.identifier].touchedElement=e,!1):(this.touches[t.identifier]=t,this.touches[t.identifier].touchedElement=e,void this.handleTouchRegistered(this.touches[t.identifier])))},unregisterTouch:function(t){void 0!==this.touches[t]&&(delete this.touches[t],this.handleTouchUnregistered(t))},isTouchRegistered:function(t){return void 0!==this.touches[t.identifier]},getTouches:function(){var e=this;return new t(this.map(this.touches,function(t){return e.clone(t)}))},formatTouch:function(t){return{identifier:void 0===t.identifier?"_faketouch":t.identifier,x:void 0===t.pageX?t.x:t.pageX,y:void 0===t.pageY?t.y:t.pageY,t:(new Date).getTime()}},registerTapLog:function(t){this.tapsLog[t.identifier]={touch:this.clone(t),startTime:(new Date).getTime(),endTime:void 0,duration:void 0,executed:!1}},unregisterTapLog:function(t){void 0!==this.tapsLog[t]&&this.registerTapEnd(this.tapsLog[t])},clearTapLog:function(){this.tapsLog={}},registerTapEnd:function(t){t.endTime||(t.endTime=(new Date).getTime(),t.duration=t.endTime-t.startTime)},getValidTapRegistered:function(){var e=!1,i=this;return this.each(this.tapsLog,function(t){i.validateTap(t)&&(e=t)}),e},validateTap:function(t){return!!(t.duration>this._config.tapMinDuration&&t.duration<this._config.tapMaxDuration&&this.isTheElement(t.touch.touchedElement))},fire:function(t,e){for(var i in this.events[t])this.events[t][i].apply(this,e)},fireTouchMove:function(){var t=this.formatMovement();(0<t.width||0<t.height)&&this.fire("touchmove",[t])},isTheElement:function(t){return t==this.el||this.isChild(t,this.el)},isChild:function(t,e){for(var i=t.parentNode;i;){if(i==e)return!0;i=i.parentNode}return!1},addEvent:function(t,e,i,s){s=void 0!==s&&s,t.attachEvent?(t["e"+e+i]=i,t[e+i]=function(){t["e"+e+i](window.event)},t.attachEvent("on"+e,t[e+i])):t.addEventListener(e,i,s)},removeEvent:function(t,e,i,s){s=void 0!==s&&s,t.detachEvent?(t.detachEvent("on"+e,t[e+i]),t[e+i]=null):t.removeEventListener(e,i,s)},isEventCancelable:function(t){return void 0===t.cancelable||t.cancelable},preventEvent:function(t){this.isEventCancelable(t)&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},eventTarget:function(t){var e;return t.target?e=t.target:t.srcElement&&(e=t.srcElement),e=3==e.nodeType?e.parentNode:e},on:function(t,e){return void 0!==this.events[t]&&this.events[t].push(e),this},isEventsRegistered:function(t){return void 0!==this.events[t]&&0<this.events[t].length},config:function(t){function s(t,e){switch(e){case"int":return parseInt(t,10);case"boolean":return!!t;default:return t}}void 0===t&&(t={});var e,i={direction:{value:["horizontal","vertical"],type:"string",multiple:!0},minWidth:{value:!1,type:"int"},minHeight:{value:!1,type:"int"},minDuration:{value:!1,type:"int"},maxWidth:{value:!1,type:"int"},maxHeight:{value:!1,type:"int"},maxDuration:{value:!1,type:"int"},disablePinch:{value:!1,type:"boolean"},alwaysPreventTouchStart:{value:!1,type:"boolean"},fireMoveOnRequestAnimationFrame:{value:!1,type:"boolean"},doubletapWaitTimeout:{value:530,type:"int"},tapMaxDuration:{value:600,type:"int"},tapMinDuration:{value:5,type:"int"}};for(e in this._config={},i)this._config[e]=void 0===t[e]?i[e].value:function(t,e){if(void 0===e.multiple&&(e.multiple=!1),e.multiple){t=t.split(" ");for(var i=0;i<t.length;i++)t[i]=s(t[i],e.type)}else t=s(t,e.type);return t}(t[e],i[e])},setTouchAction:function(t){var e=[];this.isDirection(t,"vertical")&&e.push("pan-x"),this.isDirection(t,"horizontal")&&e.push("pan-y"),this.el.style.touchAction=0<e.length?e.join(" "):"none"},isDirection:function(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},isMainMouseButton:function(t){return void 0!==t.which?1==t.which:void 0===ec.button||0==t.button},destroy:function(){this.handleEvents("remove"),this.events=[]},objProps:function(t){var e,i=[];for(e in t)t.hasOwnProperty(e)&&i.push(e);return i},map:function(t,e){var i,s=[];for(i in t)t.hasOwnProperty(i)&&s.push(e(t[i],t));return s},each:function(t,e){for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},clone:function(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}},e},"object"==typeof i?e.exports=n():(void 0===s.webit&&(s.webit={}),s.webit.swipe=n())},{}]},{},[4])(4)});